{% extends 'base.html' %}

{% block title %}
ReleCloud - {{ destination }}
{% endblock %}

{% block content %}
<h1>{{ destination }}</h1>

{# PT2 IMAGEN DEL DESTINO #}
{% load static %}

<img src="{% static 'img/destinations/' %}{{ destination.name|slugify }}.jpg"
     alt="{{ destination }}"
     class="img-fluid mb-3"
     style="max-width: 400px; border-radius: 10px;">


<p>{{ destination.description }}</p>

{% if destination.average_rating %}
    <p>
        Valoración media: ⭐ {{ destination.average_rating }} / 5
    </p>
{% else %}
    <p>
        Este destino aún no tiene valoraciones.</p>
{% endif %}

<p>You can explore {{ destination }} on the following cruises:</p>
<ul class="list-group">
    {% for cruise in destination.cruises.all %}
    <a class="list-group-item list-group-item-action" href="{% url 'cruise_detail' cruise.id %}">
        {{ cruise }}
    </a>
    {% endfor %}
</ul>

<h3>Reviews</h3>

<!-- Botón para crear review -->
{% if can_review %}
    <a href="{% url 'destination_review_create' destination.id %}"
       class="btn btn-primary mb-3">
        Añadir review
    </a>
{% elif user.is_authenticated %}
    <p><em>No puedes valorar este destino porque no has solicitado información de ningún crucero asociado.</em></p>
{% else %}
    <p><em>Inicia sesión para poder valorar este destino.</em></p>
{% endif %}

<hr>

{% for review in reviews %}
    <p><strong>{{ review.user.username }}</strong> — ⭐ {{ review.rating }}</p>
    <p>{{ review.comment }}</p>
    <hr>
{% empty %}
    <p>No hay reviews todavía.</p>
{% endfor %}

{% endblock content %}
